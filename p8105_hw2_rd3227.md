p8105_hw2_rd3227
================
Ruihan Ding
2025-09-29

# Problem 1

Clean the data in pols-month.csv

``` r
# import dataset
pols_df = 
  read_csv(
    "fivethirtyeight/pols-month.csv", 
    na = c("NA", ".", ""), 
    show_col_types = FALSE
    ) |> 
  janitor::clean_names() |> 
  
# break up the variable mon into integer variables year, month, and day
  separate(
    mon, into = c("year", "month", "day"), sep = "-",
  ) |> 
  mutate(across(c(year:day), as.integer)) |> 

# replace month number with month name
  mutate(month = factor(month.name[month], levels = month.name)) |> 

# create a president variable
  mutate(
    president = case_when(
      prez_gop == 1 ~ "dem",
      prez_dem == 1 ~ "gop"
    )) |> 

# remove unnecessary columns
  select(-prez_gop, -prez_dem, -day)
```

Clean the data in snp.csv

``` r
# import dataset
snp_df = 
  read_csv(
    "fivethirtyeight/snp.csv", 
    na = c("NA", ".", ""),
    show_col_types = FALSE
    ) |> 
  janitor::clean_names() |> 

# match the year and month format to the previous dataframe
  separate(
    date, into = c("month", "day", "year"), sep = "/",
  ) |> 
  mutate(across(c(month:year), as.integer)) |> 
  mutate(month = factor(month.name[month], levels = month.name)) |> 
  mutate(
    year = if_else(year < 20, 2000 + year, 1900 + year)) |> 

# arrange and organize
  select(year, month, everything(), -day) |> 
  arrange(year, month)
```

Clean the data in unemployment.csv

``` r
# import dataset
unepm_df = 
  read_csv(
    "fivethirtyeight/unemployment.csv", 
    na = c("NA", ".", ""),
    show_col_types = FALSE
    ) |> 
  janitor::clean_names() |> 

# make month a factor variable
  pivot_longer(
    cols = jan:dec,
    names_to = "month",
    values_to = "unemployment"
  ) |> 
  mutate(
    month = factor(
    str_to_title(month), 
    levels = month.abb,
    labels = month.name
      )) |> 

# arrange according to time
  arrange(year, month) 
```

Join the datasets.

``` r
merge_df = 
  left_join(pols_df, snp_df, by = c("year", "month")) |> 
  left_join(unepm_df, by = c("year", "month"))
```

The pols-month dataset contains 822 observations of 9 variables,
covering monthly political data from 1947–2015. Variables include
indicators of the president’s party (`prez_gop`, `prez_dem`) and counts
of governors, senators, and representatives by party (`gov_gop`,
`gov_dem`, `sen_gop`, `sen_dem`, `rep_gop`, `rep_dem`). The unemployment
dataset has 68 observations of 13 variables, reporting monthly
unemployment rates from 1948–2015, with one row per year (`year`) and
twelve monthly columns (`Jan`–`Dec`). The snp dataset includes 787
observations of 2 variables, covering monthly closing values of the S&P
500 stock index (`date`, `close`) from 1950–2015. After merging these
datasets by year and month, the resulting dataset spans 1950–2015, with
822 rows × 11 columns, and combines political indicators, unemployment
rates, and stock market performance in a single table.

# Problem 2

Read and clean the Mr. Trash Wheel sheet.

``` r
mtw_df = 
  read_excel("202409TrashWheel.xlsx", 
             sheet = "Mr. Trash Wheel", 
             range = "A2:N655", 
             na = c("")
             ) |> 
  janitor::clean_names() |> 
  filter(!is.na(dumpster)) |> 
  mutate(
    sports_balls = as.integer(round(sports_balls)))
```

Read and clean the Professor Trash Wheel sheet.

``` r
ptw_df = 
  read_excel("202409TrashWheel.xlsx", 
             sheet = "Mr. Trash Wheel", 
             range = "A2:M123", 
             na = c("")
             ) |> 
  janitor::clean_names() |> 
  filter(!is.na(dumpster)) |> 
  mutate(
    sports_balls = as.integer(round(sports_balls)))
```

Read and clean the Gwynnda Trash Wheel sheet.

``` r
gtw_df = 
  read_excel("202409TrashWheel.xlsx", 
             sheet = "Mr. Trash Wheel", 
             range = "A2:L266", 
             na = c("")
             ) |> 
  janitor::clean_names() |> 
  filter(!is.na(dumpster))
```
